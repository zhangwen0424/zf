{
  "version": 3,
  "sources": ["../../shared/src/index.ts", "../src/parser.ts", "../src/runtimeHelpers.ts", "../src/index.ts"],
  "sourcesContent": ["export const isObject = function (value) {\n  return value != null && typeof value === \"object\";\n};\n\nexport const isFunction = function (value) {\n  return typeof value === \"function\";\n};\n\nexport const isString = function (value) {\n  return typeof value === \"string\";\n};\n\nexport const invokeArrayFn = function (fns) {\n  fns && fns.forEach((fn) => fn());\n};\n\nexport * from \"./shapeFlag\";\n", "import { NodeTypes } from \"./ast\";\n\n// \u521B\u5EFA\u884C\u5217\u4E0A\u4E0B\u6587\uFF0C\u5B58\u50A8\u884C\u5217\u53F7\u3001\u6A21\u7248\u5185\u5BB9\nfunction createParserContext(template) {\n  return {\n    line: 1, //\u884C\u53F7\n    column: 1, // \u5217\u53F7\n    offset: 0, // \u504F\u79FB\u91CF\n    source: template, // \u4F1A\u4E0D\u505C\u5730\u88AB\u622A\u53D6 \u76F4\u5230\u5B57\u7B26\u4E32\u4E3A\u7A7A\u7684\u65F6\u5019\n    originalSource: template, // \u539F\u59CB\u5185\u5BB9\n  };\n}\n\n// \u5904\u7406\u6362\u884C\u6E38\u6807\nfunction advancePositionWithMutation(context, source, endIndex) {\n  let linesCount = 0; // \u8BA1\u7B97\u7ECF\u8FC7\u591A\u5C11\u884C  \\n\n  let linePos = -1; // \u9047\u5230\u6362\u884C\u6807\u8BB0\u6362\u884C\u7684\u5F00\u59CB\u4F4D\u7F6E\n  // \u6839\u636E\u7ED3\u675F\u7D22\u5F15\u904D\u5386\u5185\u5BB9\uFF0C\u770B\u4E00\u4E0B\u7ECF\u5386\u4E86\u591A\u5C11\u4E2A\\n\u5B57\u7B26\n  for (let i = 0; i < endIndex; i++) {\n    if (source[i].charCodeAt(0) === 10) {\n      // \u5C31\u662F\u6362\u884C\n      linesCount++;\n      linePos = i;\n    }\n  }\n  // console.log(linesCount, linePos);\n  context.line += linesCount;\n  context.offset += endIndex;\n  context.column =\n    linePos == -1 ? context.column + endIndex : endIndex - linePos;\n}\n\n// \u83B7\u53D6\u5F53\u524D\u6E38\u6807\nfunction getCursor(context) {\n  let { line, column, offset } = context;\n  return { line, column, offset };\n}\n\n// \u5FAA\u73AF\u904D\u5386\u6A21\u677F\u7684\u7EC8\u6B62\u6761\u4EF6\uFF0C\u5982\u679C\u4E3A\u7A7A\u8BF4\u660E\u904D\u5386\u5B8C\u6BD5\nfunction isEnd(context) {\n  const source = context.source;\n\n  // \u5982\u679C\u9047\u5230 </div>\n  if (context.source.startsWith(\"</\")) return true;\n\n  return !source; // \u6700\u7EC8\u622A\u53D6\u5230\u7A7A\u5B57\u7B26\u4E32\uFF0C\u505C\u6B62\u622A\u53D6\n}\n\n// \u8BA1\u7B97\u4EE3\u7801\u4F4D\u7F6E\nfunction getSelection(context, start, end?) {\n  end = getCursor(context);\n  return {\n    start,\n    end,\n    source: context.originalSource.slice(start.offset, end.offset),\n  };\n}\n\n// \u524D\u8FDB\u4E00\u6B65\uFF0C\u5220\u9664\u5DF2\u7ECF\u89E3\u6790\u7684\u5185\u5BB9\uFF0C\u524D\u8FDB\u662F\u5220\u9664\u89E3\u6790\nfunction advanceBy(context, endIndex) {\n  let source = context.source;\n  advancePositionWithMutation(context, source, endIndex); //\u8BB0\u5F55\u884C\u53F7\n  // \u5220\u9664\u89E3\u6790\u540E\u7684\u5185\u5BB9\n  context.source = source.slice(endIndex);\n}\n\n// \u524D\u8FDB\uFF0C\u5220\u9664\u7A7A\u683C\nfunction advnaceBySpaces(context) {\n  const match = /^[ \\t\\r\\n]+/.exec(context.source);\n  if (match) {\n    advanceBy(context, match[0].length); // \u5220\u9664\u6240\u6709\u7A7A\u683C\n  }\n}\n\n// \u622A\u53D6\u6587\u672C\u5185\u5BB9\nfunction parserTextData(context, endIndex) {\n  const content = context.source.slice(0, endIndex);\n  // \u622A\u53D6\u540E\u9700\u8981\u5C06context.source\u4E2D\u7684\u5185\u5BB9\u5220\u9664\u6389\uFF0C\u5220\u9664\u5DF2\u7ECF\u89E3\u6790\u7684\u5185\u5BB9\n  advanceBy(context, endIndex);\n  return content;\n}\n\n// \u5904\u7406\u6587\u672C,start \u80AF\u5B9A\u662F\u6587\u672C\uFF0C\u627E\u5230\u6700\u8FD1\u7ED3\u675F\u7684\u4F4D\u7F6E\uFF08\u9047\u5230<\u6216{{),\u622A\u53D6\u5F00\u59CB\u5230\u7ED3\u675F\u7684\u4E3A\u5F53\u524D\u6587\u672C\nfunction parserText(context) {\n  // \u5982\u4F55\u8BA1\u7B97\u6587\u672C\u7684\u7ED3\u675F\u4F4D\u7F6E\n  // \u5047\u8BBE\u6CD5\u6C42\u672B\u5C3E\u7684\u7D22\u5F15\uFF0C\u5F97\u5230\u8DDD\u79BB\u81EA\u5DF1\u6700\u8FD1\u7684 < \u6216\u8005 {{ \u5C31\u7ED3\u675F\u561E\n  let endTokens = [\"<\", \"{{\"]; // \u6587\u672C\u7ED3\u675F\u7684\u8BED\u6CD5\n  let endIndex = context.source.length; // \u9ED8\u8BA4\u672B\u5C3E\u662F\u662F\u6700\u540E\u4E00\u4F4D\n  let start = getCursor(context);\n\n  // 1<{}\n  for (let i = 0; i < endTokens.length; i++) {\n    // \u56E0\u4E3A\u5F00\u5934\u80AF\u5B9A\u662F\u6587\u672C\uFF0C\u6240\u4EE5\u7B2C\u4E00\u4E2A\u5B57\u7B26\u80AF\u5B9A\u4E0D\u662F < {{, \u4ECE\u4E0B\u4E00\u4E2A\u5F00\u59CB\u67E5\u627E\n    const index = context.source.indexOf(endTokens[i], 1);\n    // \u627E\u5230\u6700\u8FD1\u7ED3\u675F\u7684\u4F4D\u7F6E\n    if (index > -1 && index < endIndex) {\n      // \u6CA1\u5230\u7ED3\u5C3E\u5C31\u9047\u5230\u4E86 {{  <\n      endIndex = index; // \u7528\u6700\u8FD1\u7684\u4F5C\u4E3A \u6211\u4EEC\u7684\u7ED3\u5C3E\n    }\n  }\n  // context \u662F\u5F53\u524D\u6B63\u5728\u89E3\u6790\u7684\u5185\u5BB9\uFF0C\u6240\u4EE5\u4E0D\u7528\u8003\u8651startIndex\n  const content = parserTextData(context, endIndex); //\u622A\u53D6\u6587\u672C\u5185\u5BB9\n  return {\n    type: NodeTypes.TEXT, // \u7C7B\u578B\uFF1A\u6587\u672C\n    content, // \u6587\u672C\u5185\u5BB9\n    loc: getSelection(context, start), // \u8BA1\u7B97\u4EE3\u7801\u5F00\u59CB\u7ED3\u675F\u4F4D\u7F6E\uFF0C\u62A5\u9519\u4F4D\u7F6E\n  };\n}\n\n// \u5904\u7406\u8868\u8FBE\u5F0F{{}}, \u5148\u53BB\u6389\u524D\u9762{{\uFF0C\u518D\u53BB\u6389\u540E\u9762}}\uFF0C\u62FF\u5230\u6587\u672C\nfunction parserInterpolation(context) {\n  const start = getCursor(context); // \u8868\u8FBE\u5F0F\u7684\u5F00\u59CB\u4FE1\u606F\n  const clonseIndex = context.source.indexOf(\"}}\", 2); // \u83B7\u53D6\u5927\u62EC\u53F7\u7684\u7ED3\u675F\u4F4D\u7F6E\n\n  advanceBy(context, 2); // \u5220\u9664\u561E {{  \u81EA\u52A8\u66F4\u65B0\u884C\u5217\u4FE1\u606F\n\n  const innerStart = getCursor(context); // \u8868\u8FBE\u5F0F\u5185\u90E8\u5F00\u59CB\u7684\u4F4D\u7F6E\n  const rawContentEndIndex = clonseIndex - 2; // \u83B7\u53D6\u539F\u59CB\u7528\u6237\u5927\u62EC\u53F7\u4E2D\u7684\u5185\u5BB9\u957F\u5EA6\n\n  // \u83B7\u53D6\u53BB\u7A7A\u683C\u662F\u4E4B\u524D\u7684\u5185\u5BB9\n  const preTrimContent = parserTextData(context, rawContentEndIndex);\n  const innerEnd = getCursor(context);\n  const content = preTrimContent.trim(); // \u53BB\u6389\u5185\u5BB9\u7684\u7A7A\u683C\n\n  advanceBy(context, 2); // \u53BB\u6389 }}\n\n  return {\n    type: NodeTypes.INTERPOLATION,\n    content: {\n      type: NodeTypes.SIMPLE_EXPRESSION,\n      isStatic: false,\n      content: preTrimContent, // \u5185\u5BB9 **\n      loc: getSelection(context, innerStart, innerEnd), // \u6709\u70B9\u5C0Fbug\n    },\n    loc: getSelection(context, start),\n  };\n}\n\n// \u5904\u7406\u5143\u7D20\nfunction parserElement(context) {\n  let node = parserTag(context); // \u5148\u5904\u7406\u5F00\u59CB\u6807\u7B7E\n  // debugger;\n  (node as any).children = parseChilren(context); // \u9700\u8981\u5728\u5904\u7406\u6807\u7B7E\u540E\uFF0C\u5904\u7406\u7684\u5B50\u5143\u7D20\u90FD\u662F\u5979\u7684\u513F\u5B50\n  // <div><span></span><div>\n  if (context.source.startsWith(\"</\")) {\n    // </div>\n    parserTag(context); // \u5220\u9664\u6807\u7B7E\u7684\u95ED\u5408\u6807\u7B7E\uFF0C\u6CA1\u6709\u6536\u96C6\n  }\n  node.loc = getSelection(context, node.loc.start); // \u66F4\u65B0\u4E4B\u524D\u7684\u4FE1\u606F\n  return node;\n}\n\n// \u5904\u7406\u6807\u7B7E\nfunction parserTag(context) {\n  const start = getCursor(context);\n\n  // match 1) \u5339\u914D\u51FA\u6765\u7684\u662F\u5B8C\u6574\u7684\u5B57\u7B26\u4E32  <div></div>  match[0] = <div\n  // 2) \u7B2C\u4E00\u4E2A\u5206\u7EC4\n  const match = /^<\\/?([a-z][^ \\t\\r\\n/>]*)/.exec(context.source);\n  const tag = match[1]; //'div'\n  advanceBy(context, match[0].length); // <div\n  advnaceBySpaces(context);\n\n  // \u5904\u7406\u5143\u7D20\u4E0A\u7684\u5C5E\u6027\n  let props = parseAttributes(context);\n  let isSelfClosing = context.source.startsWith(\"/>\"); // \u6211\u9700\u8981\u5220\u9664\u95ED\u5408\u6807\u7B7E\n  advanceBy(context, isSelfClosing ? 2 : 1);\n  return {\n    type: NodeTypes.ELEMENT,\n    isSelfClosing,\n    tag,\n    props,\n    loc: getSelection(context, start),\n  };\n}\n// \u5904\u7406\u5C5E\u6027\u503C \"a\"  'b'\nfunction parseAttributeValue(context) {\n  // \u5982\u679C\u6709\u5F15\u53F7 \u5220\u9664\u5F15\u53F7\uFF0C\u6CA1\u6709\u5F15\u53F7\u53EF\u4EE5\u76F4\u63A5\u7528\n  const quote = context.source[0];\n  const isQuoted = quote === \"'\" || quote === '\"'; // a='1' a=\"a\"\n  let content;\n  if (isQuoted) {\n    advanceBy(context, 1);\n    const endIndex = context.source.indexOf(quote); // \u7ED3\u5C3E\u7684\u7D22\u5F15   '   '\n    const content = parserTextData(context, endIndex);\n    advanceBy(context, 1);\n    return content;\n  } else {\n  }\n}\n// \u5904\u7406\u5C5E\u6027\nfunction parseAttribute(context) {\n  const start = getCursor(context);\n  const match = /^[^\\t\\r\\n\\f />][^\\t\\r\\n\\f />=]*/.exec(context.source);\n\n  const name = match[0]; // \u83B7\u53D6\u5C5E\u6027\u540D\u5B57\n  advanceBy(context, name.length); // \u5220\u9664\u5C5E\u6027\u540D\n\n  let value;\n\n  // \u5148\u5339\u914D\u7A7A\u683C \u548C = \u5220\u9664\u6389 \u540E\u9762\u7684\u5C31\u662F\u6570\u5B66\n  if (/^[\\t\\r\\n\\f ]*=/.test(context.source)) {\n    //   b\n    advnaceBySpaces(context);\n    advanceBy(context, 1);\n    advnaceBySpaces(context);\n    value = parseAttributeValue(context); //  vue 2\u76F4\u63A5\u641E\u4E00\u4E2A\u5339\u914D\u5C5E\u6027\u7684\u6B63\u5219\u5C31\u53EF\u4EE5\u4E86\n  }\n\n  return {\n    type: NodeTypes.ATTRIBUTE,\n    name,\n    value: {\n      content: value,\n    },\n    loc: getSelection(context, start),\n  };\n}\n// \u6279\u91CF\u5904\u7406\u5C5E\u6027\nfunction parseAttributes(context) {\n  // \u89E3\u6790\u5C5E\u6027\n  const props = []; // <div   >\n  while (!context.source.startsWith(\">\")) {\n    // \u9047\u5230> \u5C31\u505C\u6B62\u5FAA\u73AF\n    const prop = parseAttribute(context);\n    props.push(prop);\n    advnaceBySpaces(context);\n  }\n  return props;\n}\n\n// \u89E3\u6790\u4E0A\u4E0B\u6587\nfunction parseChilren(context) {\n  const nodes = [];\n  while (!isEnd(context)) {\n    const s = context.source; // \u83B7\u53D6\u5F53\u524D\u7684\u5185\u5BB9\n    let node; // \u5F53\u524D\u5904\u7406\u7684\u8282\u70B9\n    if (s[0] === \"<\") {\n      // \u6211\u53EF\u4EE5\u5BF9\u5143\u7D20\u8FDB\u884C\u5904\u7406\n      node = parserElement(context);\n    } else if (s.startsWith(\"{{\")) {\n      // \u6211\u4EEC\u53EF\u4EE5\u5BF9\u8868\u8FBE\u5F0F\u8FDB\u884C\u5904\u7406\n      node = parserInterpolation(context);\n    }\n    if (!node) {\n      // \u8FD9\u4E2A\u4E1C\u897F\u5C31\u662F\u6587\u672C\n      node = parserText(context);\n    }\n    nodes.push(node);\n  }\n\n  // \u5904\u7406\u540E\u7684\u8282\u70B9 \u5982\u679C\u662F\u6587\u672C \u591A\u4E2A\u7A7A\u683C \u5E94\u8BE5\u5408\u5E76\u6210\u4E00\u4E2A\n\n  // \u5982\u679C\u89E3\u6790\u540E\u7684\u7ED3\u679C\u662F\u7EAF\u7A7A\u683C \uFF0C\u5219\u76F4\u63A5\u79FB\u9664\u5C31\u53EF\u4EE5\u4E86\n\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    if (node.type == NodeTypes.TEXT) {\n      if (!/[^\\t\\r\\n\\f ]/.test(node.content)) {\n        node[i] = null; // \u5982\u679C\u662F\u7A7A\u8282\u70B9 \u5219\u76F4\u63A5\u53D8\u4E3Anull\n      } else {\n        node.content = node.content.replace(/[\\t\\r\\n\\f ]+/g, \" \");\n      }\n    }\n  }\n  return nodes.filter((item) => {\n    return Boolean(item);\n  });\n  // context \u662F\u5F53\u524D\u6B63\u5728\u89E3\u6790\u7684\u5185\u5BB9\uFF0C\u6240\u4EE5\u4E0D\u7528\u8003\u8651startIndex\n  // return nodes;\n}\n\nfunction createRoot(children, loc) {\n  return {\n    type: NodeTypes.ROOT,\n    children,\n    loc,\n  };\n}\n\n// \u89E3\u6790\u5B57\u7B26\u4E32\nexport function parser(template) {\n  // \u89E3\u6790\u7684\u65F6\u5019 \u89E3\u6790\u4E00\u70B9\u5220\u9664\u4E00\u70B9,\u89E3\u6790\u7684\u7EC8\u6B62\u6761\u4EF6\u662F\u6A21\u677F\u7684\u5185\u5BB9\u6700\u7EC8\u4E3A\u7A7A\n  // \u72B6\u6001\u673A , \u6709\u9650\u72B6\u6001\u673A\u3002\u627E\u5230\u6BCF\u4E00\u4E2A\u5B57\u7B26\u4E32\u8FDB\u884C\u5904\u7406\n  const context = createParserContext(template);\n  const start = getCursor(context);\n  return createRoot(parseChilren(context), getSelection(context, start)); // \u8FD4\u56DE\u4E0A\u4E0B\u6587\u5185\u5BB9)\n}\n", "import { NodeTypes } from \"./ast\";\n\nexport const TO_DISPLAY_STRING = Symbol(\"toDisplayString\"); // \u5B8F\nexport const CREATE_TEXT = Symbol(\"createTextVNode\");\nexport const CREATE_ELEMENT_VNODE = Symbol(\"createElementVnode\");\nexport const OPEN_BLOCK = Symbol(\"openBlock\");\nexport const FRAGMENT = Symbol(\"fragment\");\nexport const CREATE_ELEMENT_BLOCK = Symbol(\"createElementBlock\");\nexport const helpNameMap = {\n  [TO_DISPLAY_STRING]: \"toDisplayString\",\n  [CREATE_TEXT]: \"createTextVNode\",\n  [CREATE_ELEMENT_VNODE]: \"createElementVNode\",\n  [CREATE_ELEMENT_BLOCK]: \"createElementBlock\",\n  [OPEN_BLOCK]: \"openBlock\",\n  [FRAGMENT]: \"fragment\",\n};\n// \u679A\u4E3E\u672C\u8D28\u5C31\u662F\u5BF9\u8C61\n\n// \u751F\u6210\u6587\u672C\u8C03\u7528\u7684\u4EE3\u7801\nexport function createCallExpression(context, args) {\n  // \u6A21\u7248\uFF1A\u4EE3\u7801\n  // 123 {{abc}} <div></div>\n  // \u8F6C\u5316\u4E3A\uFF1A\n  // import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n  // export function render(_ctx, _cache, $props, $setup, $data, $options) {\n  //   return (_openBlock(), _createElementBlock(_Fragment, null, [\n  //     _createTextVNode(\"123 \" + _toDisplayString(_ctx.abc) + \" \", 1 /* TEXT */),\n  //     _createElementVNode(\"div\")\n  //   ], 64 /* STABLE_FRAGMENT */))\n  // }\n\n  // _createTextVNode(\"123 \" + _toDisplayString(_ctx.abc) + \" \", 1 /* TEXT */),\n  // arguments\u8BB0\u5F55\u4F20\u5165\u7684\u53C2\u6570\uFF0Ctype \u6807\u8BC6\u8C03\u7528\u7C7B\u578B, helper \u6807\u8BC6\u8C03\u7528\u7C7B\u578B\u6807\u8BC6\u4E3Ajs\u8868\u8FBE\u5F0F\uFF0C\n  context.helper(CREATE_TEXT);\n  return {\n    type: NodeTypes.JS_CALL_EXPRESSION, //\u662F js \u8C03\u7528\u8868\u8FBE\u5F0F createTextVnode()\n    arguments: args,\n  };\n}\n\n// \u751F\u6210\u865A\u62DF\u8282\u70B9\u8C03\u7528\u7684\u4EE3\u7801\nexport function createVNodeCall(context, tag, props, children) {\n  context.helper(CREATE_ELEMENT_VNODE);\n  return {\n    type: NodeTypes.VNODE_CALL, // createElementVNode()\n    tag,\n    props,\n    children,\n  };\n}\n\n// \u751F\u6210\u5C5E\u6027\u8868\u8FBE\u5F0F\u8C03\u7528\u7684\u4EE3\u7801\nexport function createObjectExpression(properties) {\n  return {\n    type: NodeTypes.JS_OBJECT_EXPRESSION, // \u589E\u52A0\u7C7B\u578B\u6807\u8BC6\uFF0C\u5BF9\u8C61\u8868\u8FBE\u5F0F\n    properties,\n  };\n}\n", "import { isString } from \"@vue/shared\";\nimport { PatchFlags } from \"packages/shared/src/patchFlags\";\nimport { NodeTypes } from \"./ast\";\nimport { parser } from \"./parser\";\nimport {\n  createCallExpression,\n  createObjectExpression,\n  createVNodeCall,\n  CREATE_ELEMENT_BLOCK,\n  CREATE_ELEMENT_VNODE,\n  CREATE_TEXT,\n  FRAGMENT,\n  helpNameMap,\n  OPEN_BLOCK,\n  TO_DISPLAY_STRING,\n} from \"./runtimeHelpers\";\n\n// \u8F6C\u5316\u8868\u8FBE\u5F0F\nfunction transformExpression(node, context) {\n  if (node.type === NodeTypes.INTERPOLATION) {\n    // console.log(\"\u8868\u8FBE\u5F0F\u5904\u7406\", node, context, \"----\");\n    node.content.content = `_ctx.${node.content.content}`;\n  }\n}\n\n// \u8F6C\u6362\u5143\u7D20\nfunction transformElement(node, context) {\n  if (node.type === NodeTypes.ELEMENT) {\n    // console.log(\"\u8868\u8FBE\u5F0F\u5143\u7D20\u8FDB\u5165\", node.tag, context, \"----\");\n    return () => {\n      // \u9000\u51FA\u51FD\u6570\n      // \u5C5E\u6027\u5904\u7406\n      const properties = [];\n      const props = node.props;\n      for (let i = 0; i < props.length; i++) {\n        let { name, value } = props[i];\n        properties.push({ key: name, value: value.content });\n      }\n      const vnodeProps =\n        properties.length > 0 ? createObjectExpression(properties) : null;\n\n      // \u6807\u7B7E\u5904\u7406\n      const vnodeTag = JSON.stringify(node.tag); // \u7ED9\u6807\u7B7E\u52A0\u201C\u201D\n\n      // \u513F\u5B50\u53EF\u80FD\u662F \u4E00\u4E2A\u8282\u70B9\uFF0C \u6216\u8005\u662F\u591A\u4E2A\n      let vnodeChildren = null;\n      if (node.children.length === 1) {\n        vnodeChildren = node.children[0];\n      } else {\n        if (node.children.length > 1) {\n          vnodeChildren = node.children;\n        }\n      }\n\n      return (node.codegenNode = createVNodeCall(\n        context,\n        vnodeTag,\n        vnodeProps,\n        vnodeChildren\n      ));\n    };\n  }\n}\n\nfunction isText(node) {\n  // \u662F\u8868\u8FBE\u5F0F\u6216\u8005\u6587\u672C\n  return node.type === NodeTypes.INTERPOLATION || node.type === NodeTypes.TEXT;\n}\n\n// \u8F6C\u5316\u6587\u672C\nfunction transformText(node, context) {\n  if (node.type === NodeTypes.ROOT || node.type === NodeTypes.ELEMENT) {\n    return () => {\n      // \u5BF9\u4E8E\u6587\u672C\u6765\u8BF4 \u4E3B\u8981\u662F\u6839\u636E\u6587\u672C\u7684\u7279\u6027\u6765\u751F\u6210 createTextVnode(\u5185\u5BB9,\u6807\u793A\u4F4D)\n      // \u5C06\u591A\u4E2A\u6587\u672C\u5143\u7D20\u5408\u5E76\u6210\u4E00\u4E2A {{abc}} hello  ->  createTextVnode(proxy.abc + 'hello')\n\n      // console.log(\"\u6587\u672C\u8F6C\u6362\", node, context, \"----\");\n      // \u9ED8\u8BA4\u770B\u7B2C\u4E00\u4E2A\u5143\u7D20\u662F\u4E0D\u662F\u6587\u672C\uFF0C\u5982\u679C\u662F\u5728\u5C1D\u8BD5\u770B\u4E0B\u4E00\u4E2A\u5143\u7D20\u662F\u4E0D\u662F\u6587\u672C\uFF0C\u5982\u679C\u4E0D\u662F\u5C31\u4E0D\u62FC\u63A5\u4E86\n      let hasText = false;\n      const children = node.children; // \u5148\u83B7\u53D6\u6240\u6709\u513F\u5B50\n      let currentContainer;\n      for (let i = 0; i < children.length; i++) {\n        let child = children[i];\n        if (isText(child)) {\n          // \u662F\u6587\u672C\n          hasText = true;\n          for (let j = i + 1; j < children.length; j++) {\n            const nextNode = children[j];\n            if (isText(nextNode)) {\n              // \u8981\u5C06\u4E24\u4E2A\u8282\u70B9\u5408\u5E76\u5728\u4E00\u8D77\n              if (!currentContainer) {\n                // \u7528\u7B2C\u4E00\u4E2A\u8282\u70B9\u4F5C\u4E3A\u62FC\u63A5\u7684\u8282\u70B9\uFF0C\u5C06\u4E0B\u4E00\u4E2A\u8282\u70B9\u62FC\u63A5\u4E0A\u53BB\u5373\u53EF\n                currentContainer = children[i] = {\n                  type: NodeTypes.COMPOUND_EXPRESSION, // \u7EC4\u5408\u8868\u8FBE\u5F0F\n                  children: [child],\n                };\n              }\n              currentContainer.children.push(`+`, nextNode);\n              children.splice(j, 1); // \u5220\u9664\u513F\u5B50\u7684\u5F53\u524D\u9879\uFF0C\u5E76\u4E14\uFF0C\u9632\u6B62\u584C\u9677\u9700\u8981--\n              j--;\n            } else {\n              currentContainer = null;\n              break; // \u9047\u5230\u4E86\u5143\u7D20\u7684\u65F6\u5019 \u9700\u8981\u8DF3\u51FA\uFF0C\u518D\u627E\u4E0B\u4E00\u4E2A\u4E2A\u5143\u7D20\n            }\n          }\n        }\n      }\n\n      // <div>hello</div>\n      if (!hasText || children.length == 1) {\n        // \u5143\u7D20\u91CC\u9762\u90FD\u662F\u5143\u7D20\uFF0C\u6CA1\u6709\u5904\u7406\u6587\u672C \u76F4\u63A5\u8DF3\u8FC7\u5C31\u53EF\u4EE5\u4E86\n        return;\n      }\n      // \u5BF9\u4E8E\u6587\u672C\u6211\u4EEC\u9700\u8981\u91C7\u7528createTextVNode \u6765\u8FDB\u884C\u65B9\u6CD5\u751F\u6210\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        // \u5F53\u524D\u662F\u6587\u672C\u6216\u8005\u662F\u5408\u5E76\u540E\u7684\n        if (isText(child) || child.type == NodeTypes.COMPOUND_EXPRESSION) {\n          const callArgs = [];\n          callArgs.push(child);\n\n          // \u5982\u679C\u4E0D\u662F\u6587\u672C\uFF0C\u6DFB\u52A0\u6587\u672C\u6807\u8BC6\n          if (child.type != NodeTypes.TEXT) {\n            callArgs.push(PatchFlags.TEXT + \"\");\n          }\n\n          // \u5C06\u6B64\u5143\u7D20 \u8FDB\u884C\u5904\u7406 \u5904\u7406\u6210 createTextVnode\u7684\u683C\u5F0F\n          children[i] = {\n            // type\u662Fast\u7684\u6807\u8BC6\n            type: NodeTypes.TEXT_CALL, // \u751F\u6210\u6587\u672C\u8C03\u7528\n            content: child,\n            // \u751F\u6210\u4EE3\u7801 \u5728transform\u4E2D\u4F1A\u751F\u6210\u4E00\u4E9B\u989D\u5916\u7684\u4FE1\u606F\uFF0C\u662F\u7528\u4E8E\u4EE3\u7801\u751F\u6210ed\n            codegenNode: createCallExpression(context, callArgs),\n          };\n        }\n      }\n      console.log(children);\n    };\n  }\n}\n\n//\u521B\u5EFA\u8F6C\u5316\u7684\u4E0A\u4E0B\u6587\nfunction createTransformContext(root) {\n  // <div>1123 <span>></div><\n  const context = {\n    currentNode: root,\n    parent: null,\n    // vue3 \u65E9\u671F\u6CA1\u6709\u4F18\u5316\u7684\u65F6\u5019 \u53EF\u4EE5\u7528set\u6765\u53BB\u91CD   \u8BA1\u6570\u529F\u80FD  {createVnode:5}\n    helpers: new Map(), // \u7528\u4E8E\u5B58\u50A8\u7528\u5230\u7684\u65B9\u6CD5\n    helper(name) {\n      const count = context.helpers.get(name) || 0;\n      context.helpers.set(name, count + 1);\n      return name;\n    },\n    removeHelper(name) {\n      const count = context.helpers.get(name);\n      const currentCount = count - 1;\n      if (!currentCount) {\n        context.helpers.delete(name);\n      } else {\n        context.helpers.set(name, currentCount);\n      }\n    },\n    nodeTransform: [\n      // \u8282\u70B9\u8F6C\u6362\uFF0C\u7A0D\u540E\u6211\u4F1A\u904D\u5386\u6811\uFF0C\u62FF\u5230\u8282\u70B9\u8C03\u7528\u8FD9\u4E9B\u8F6C\u5316\u65B9\u6CD5\u8FDB\u884C\u8F6C\u6362\n      transformExpression, // \u8F6C\u6362\u8868\u8FBE\u5F0F\n      transformElement, // \u8F6C\u6362\u5143\u7D20\n      transformText, // \u8F6C\u6362\u6587\u672C\n    ],\n  };\n\n  return context;\n}\n\n// vue2 \u4E2D\u8F6C\u5316 \u53EA\u505A\u4E86\u6807\u8BB0\uFF0C vue3\u4E2DpatchFlags, block\u7684\u5904\u7406\nfunction traverseNode(node, context) {\n  context.currentNode = node;\n  const transforms = context.nodeTransform; // \u83B7\u53D6\u6240\u6709\u7684\u8F6C\u5316\u65B9\u6CD5\n  let exitsFns = []; //\u9000\u51FA\u51FD\u6570\n  for (let i = 0; i < transforms.length; i++) {\n    let exitFn = transforms[i](node, context); // \u5FAA\u73AF\u6267\u884C\u8F6C\u6362\u65B9\u6CD5\n    if (exitFn) {\n      exitsFns.push(exitFn); // \u6700\u5916\u5C42\n    }\n  }\n  // \u904D\u5386\u513F\u5B50\uFF0C\u6267\u884C\u513F\u5B50\n  switch (node.type) {\n    case NodeTypes.ROOT:\n    case NodeTypes.ELEMENT:\n      for (let i = 0; i < node.children.length; i++) {\n        context.parent = node;\n        traverseNode(node.children[i], context);\n      }\n      break;\n    case NodeTypes.INTERPOLATION: //\u8868\u8FBE\u5F0F\n      context.helper(TO_DISPLAY_STRING);\n      break;\n  }\n  // \u6574\u4E2A\u513F\u5B50\u6267\u884C\u5B8C\u6BD5\u540E, \u4F9D\u6B21\u8C03\u7528\u9000\u51FA\u51FD\u6570\n  let len = exitsFns.length;\n  context.currentNode = node;\n  while (len--) {\n    exitsFns[len](); //  \u4FDD\u8BC1\u9000\u51FA\u51FD\u6570\u4E2D\u62FF\u5230\u7684currentNode\u662F\u6B63\u786E\u7684\uFF0C\u6211\u4EEC\u8FD8\u8981\u5C06\u5176\u8FD8\u539F\u56DE\u53BB\n  }\n}\n\nfunction createRootCodegen(root, context) {\n  const { children } = root;\n\n  if (children.length == 1) {\n    const child = children[0];\n    if (child.type == NodeTypes.ELEMENT) {\n      root.codegenNode = child.codegenNode; // \u5982\u679C\u662F\u5143\u7D20 \u5219\u76F4\u63A5\u7528\u5143\u7D20\u5C31\u53EF\u4EE5\u4E86\n      context.removeHelper(CREATE_ELEMENT_VNODE);\n      context.helper(OPEN_BLOCK);\n      context.helper(CREATE_ELEMENT_BLOCK);\n      root.codegenNode.isBlock = true; // \u6807\u8BB0\u4E3Ablock\u8282\u70B9\n      // createElementVnode / createElmenetBlock\n    } else {\n      root.codegenNode = child;\n    }\n  } else {\n    context.helper(OPEN_BLOCK);\n    context.helper(CREATE_ELEMENT_BLOCK);\n\n    root.codegenNode = createVNodeCall(\n      context,\n      context.helper(FRAGMENT),\n      null,\n      children\n    );\n    root.codegenNode.isBlock = true;\n  }\n}\n\n// \u5BF9ast\u8BED\u6CD5\u6811\u8FDB\u884C\u8F6C\u5316  \u7ED9ast\u8282\u70B9\u662F\u589E\u52A0\u4E00\u4E9B\u989D\u5916\u7684\u4FE1\u606F  codegenNode, \u6536\u96C6\u9700\u8981\u5BFC\u5165\u7684\u65B9\u6CD5\nexport function transform(root) {\n  // \u53EF\u4EE5\u5C06\u4E00\u76F4\u4F7F\u7528\u7684\u4E1C\u897F \u901A\u8FC7\u4E0A\u4E0B\u6587\u5B58\u50A8\u3001 co\u7684\u6E90\u7801\uFF0C \u904D\u5386\u6811\n  const context = createTransformContext(root); //\u521B\u5EFA\u8F6C\u5316\u7684\u4E0A\u4E0B\u6587\n  // dom\u6811\u904D\u5386 \u53EA\u80FD\u91C7\u7528\u6DF1\u5EA6\u904D\u5386\n  traverseNode(root, context);\n  createRootCodegen(root, context);\n  root.helpers = [...context.helpers.keys()];\n}\n\nfunction createCodegenContext() {\n  const context = {\n    helper: (type) => \"_\" + helpNameMap[type],\n    code: ``, // \u5B58\u50A8\u62FC\u63A5\u540E\u7684\u4EE3\u7801\n    push(code) {\n      context.code += code; // \u62FC\u63A5\u5B57\u7B26\u4E32\n    },\n    level: 0, // \u7F29\u8FDB\u4E2A\u6570\n    indent() {\n      // \u7F29\u8FDB\n      context.newline(++context.level);\n    },\n    deindent(needNewline = false) {\n      // \u662F\u5426\u6362\u884C\u5411\u5185\u7F29\u8FDB\uFF0C\u8FD8\u662F\u76F4\u63A5\u7F29\u8FDB\n      if (!needNewline) {\n        --context.level;\n      } else {\n        context.newline(--context.level);\n      }\n    },\n    newline(level = context.level) {\n      // \u6362\u884C\n      context.push(`\\n` + `  `.repeat(level));\n    },\n  };\n  return context;\n}\n\nfunction genFunctionPreamble(ast, context) {\n  // \u653E\u5BFC\u5165\n  if (ast.helpers && ast.helpers.length > 0) {\n    context.push(\n      `import {${ast.helpers\n        .map((helper) => `${helpNameMap[helper]} as _${helpNameMap[helper]}`)\n        .join(\",\")}} from \"vue\"`\n    );\n    context.newline();\n  }\n}\n\n// \u751F\u6210\u6587\u672C\u4EE3\u7801\nfunction genText(node, context) {\n  context.push(JSON.stringify(node.content));\n}\n\n// \u751F\u6210\u8868\u8FBE\u5F0F\u4EE3\u7801\nfunction genInterpolation(node, context) {\n  // \u6211\u4EEC\u7684 INTERPOLATION \u300B SIMPLE_EXPRESSION\n  // context.push(`_${helpNameMap[TO_DISPLAY_STRING]}(`);\n  context.push(`_${context.helper(TO_DISPLAY_STRING)}(`); // \u62FC\u4E0B\u5212\u7EBF\n  genNode(node.content, context);\n  context.push(`)`);\n}\n\n// \u751F\u6210\u8868\u8FBE\u5F0F\nfunction genExpression(node, context) {\n  context.push(node.content);\n}\n\nfunction genList(list, context) {\n  // createElement('tag',{},)\n  for (let i = 0; i < list.length; i++) {\n    let node = list[i];\n    if (isString(node)) {\n      context.push(node);\n    } else if (Array.isArray(node)) {\n      // \u591A\u4E2A\u5B69\u5B50\n      genList(node, context);\n    } else {\n      // \u53EF\u80FD\u662F\u5C5E\u6027\uFF0C\u4E5F\u6709\u53EF\u80FD\u662F\u4E00\u4E2A\u513F\u5B50\n      genNode(node, context);\n    }\n    if (i < list.length - 1) {\n      context.push(\",\");\n    }\n  }\n}\n\nfunction genVNodeCall(node, context) {\n  // <div a=\"1\" b=\"2\"><span></span></div>\n  // import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n  // export function render(_ctx, _cache, $props, $setup, $data, $options) {\n  //   return (_openBlock(), _createElementBlock(\"div\", {\n  //     a: \"1\",\n  //     b: \"2\"\n  //   }, [\n  //     _createElementVNode(\"span\")\n  //   ]))\n  // }\n  const { push, helper } = context;\n  const { tag, props, children, isBlock } = node;\n  if (isBlock) {\n    push(`(${helper(OPEN_BLOCK)}(),`);\n    push(helper(CREATE_ELEMENT_BLOCK));\n  }\n  push(`(`);\n  // \u6807\u7B7E \u5C5E\u6027 \u513F\u5B50\n  let list = [tag, props, children].filter(Boolean);\n  if (list.length > 1) {\n    genList(\n      (children ? [tag, props, children] : [tag, props]).map(\n        (item) => item || \"null\"\n      ),\n      context\n    );\n  } else {\n    genList([tag], context);\n  }\n  push(\")\");\n  if (isBlock) {\n    push(\")\");\n  }\n}\n\nfunction genObjectExpression(node, context) {\n  // [] => {a:1,b:2}\n  // (_openBlock(),_createElementBlock(\"div\",{a:\"1\",b:\"2\"},))\n  const { properties } = node;\n  const { push } = context;\n  if (!properties) {\n    return;\n  }\n  push(\"{\");\n  for (let i = 0; i < properties.length; i++) {\n    const { key, value } = properties[i];\n    push(key);\n    push(\":\");\n    push(JSON.stringify(value));\n    // \u4E00\u76F4\u5230\u6700\u540E\u4E00\u4E2A\u5C5E\u6027\uFF0C\u62FC\u63A5\u4E00\u4E2A,\n    if (i < properties.length - 1) {\n      push(\",\");\n    }\n  }\n  push(\"}\");\n}\n\nfunction genCallExpression(node, context) {\n  debugger;\n  context.push(context.helper(CREATE_TEXT));\n  context.push(\"(\");\n  genList(node.arguments, context);\n  context.push(\")\"); // createTextVnode('123')\n}\n\nfunction genCompoundExpression(node, context) {\n  // createTextVnode(aa  +  aa )\n  for (let i = 0; i < node.children.length; i++) {\n    const child = node.children[i];\n    if (isString(child)) {\n      context.push(child, \"1\"); // +\n    } else {\n      // \u6587\u672C  \u6216\u8005\u8868\u8FBE\u5F0F\n      genNode(child, context);\n    }\n  }\n}\n\n// \u751F\u6210\u4EE3\u7801\nfunction genNode(node, context) {\n  switch (node.type) {\n    case NodeTypes.TEXT: //  \u6587\u672C\n      genText(node, context);\n      break;\n    case NodeTypes.INTERPOLATION: // \u8868\u8FBE\u5F0F {{name}}\n      genInterpolation(node, context);\n      break;\n    case NodeTypes.SIMPLE_EXPRESSION: // \u8868\u8FBE\u5F0F\u4E2D\u7684\u53D8\u91CF\n      genExpression(node, context);\n      break;\n    // \u751F\u6210\u5143\u7D20\n    case NodeTypes.VNODE_CALL: //\u6807\u7B7E\n      genVNodeCall(node, context);\n      break;\n    case NodeTypes.JS_OBJECT_EXPRESSION: // \u6807\u7B7E\u5C5E\u6027\n      genObjectExpression(node, context);\n      break;\n    case NodeTypes.ELEMENT:\n      // \u6839\u636E\u5143\u7D20\u6211\u4EEC\u4E4B\u524D\u751F\u6210 codegenNode\u6765\u7EE7\u7EED\u751F\u6210\n      genNode(node.codegenNode, context);\n      break;\n    case NodeTypes.TEXT_CALL: // \u6587\u672C\u4E2D\u8981\u751F\u6210createTextVnode\n      genNode(node.codegenNode, context);\n      break;\n    case NodeTypes.JS_CALL_EXPRESSION: // \u6587\u672C\u751F\u6210\n      genCallExpression(node, context);\n      break;\n    case NodeTypes.COMPOUND_EXPRESSION:\n      genCompoundExpression(node, context);\n      break;\n    // case  NodeTypes.\n  }\n}\n\n// \u4EE3\u7801\u751F\u6210\nfunction generate(ast) {\n  const context = createCodegenContext(); // \u751F\u6210\u4EE3\u7801\u64CD\u4F5C(\u6362\u884C\u3001\u7F29\u8FDB)\u7684\u4E0A\u4E0B\u6587\n  genFunctionPreamble(ast, context); // \u653E\u5BFC\u5165,\u751F\u6210 imprt \u8BED\u53E5\n  context.push(\n    // \u751F\u6210\u5BFC\u51FA\u51FD\u6570\n    `export function (_ctx, _cache, $props, $setup, $data, $options){`\n  );\n  context.indent();\n  context.push(`return `); // return\n  if (ast.codegenNode) {\n    // \u5982\u679C\u6709codegen\uFF0C\u7528codegen\n    genNode(ast.codegenNode, context); // \u751F\u6210\u8282\u70B9\n  } else {\n    context.push(null); // \u5982\u679C\u6CA1\u6709\u8282\u70B9\u5219\u76F4\u63A5null\n  }\n  context.deindent(true);\n  context.push(`}`);\n  return context.code;\n}\n\n// \u628A\u6A21\u7248\u8F6C\u5316\u4E3A\u8BED\u6CD5ast\u6811\nexport function compile(template) {\n  const ast = parser(template); // 1\uFF09 \u5BF9\u6A21\u677F\u7684ast\u751F\u4EA7\n  // console.log(\"ast:\", ast);\n  transform(ast); // \u5BF9ast\u8BED\u6CD5\u6811\u8FDB\u884C\u8F6C\u5316  \u7ED9ast\u8282\u70B9\u662F\u589E\u52A0\u4E00\u4E9B\u989D\u5916\u7684\u4FE1\u606F  codegenNode, \u6536\u96C6\u9700\u8981\u5BFC\u5165\u7684\u65B9\u6CD5\n  // \u4EE3\u7801\u751F\u6210\n  return generate(ast);\n}\n"],
  "mappings": "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",
  "names": ["content"]
}
